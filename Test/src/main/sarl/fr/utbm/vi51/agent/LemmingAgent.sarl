/**
 * 
 */
package fr.utbm.vi51.^agent

import fr.utbm.vi51.^event.AreYouAwoken
import fr.utbm.vi51.^event.GiveBody
import fr.utbm.vi51.^event.IamAwoken
import fr.utbm.vi51.^event.Influence
import fr.utbm.vi51.^event.PerceptionEvent
import fr.utbm.vi51.^event.WantPerception
import fr.utbm.vi51.model.PossibleMove
import io.sarl.core.Behaviors
import io.sarl.core.DefaultContextInteractions
import io.sarl.core.Destroy
import io.sarl.core.Initialize
import io.sarl.core.Lifecycle
import io.sarl.core.Logging
import io.sarl.util.Scopes

/**
 * @author tiboty
 *
 */
agent LemmingAgent {
	uses DefaultContextInteractions, Logging, Lifecycle, Behaviors
	var presentation:boolean
	var index:int
	on Initialize{
		presentation = false
	}
	
	on AreYouAwoken[!presentation]{
		
		emit(new IamAwoken, Scopes::addresses(occurrence.source))
		presentation = true
	}
	
	on GiveBody{
		index = occurrence.index
		emit(new WantPerception, Scopes::addresses(occurrence.source))
	}
	
	on PerceptionEvent {
		
		println("bien re√ßu capitaine !")
		
		//chose how to do !!
		
		
		// return the choice
		//emit(new Influence(PossibleMove.RIGHT),Scopes::addresses(occurrence.source))
	}
	
	on Destroy{
		println("GoodBye World !")
	}
}