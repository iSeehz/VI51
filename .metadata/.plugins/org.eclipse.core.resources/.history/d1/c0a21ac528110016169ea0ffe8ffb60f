package fr.utbm.vi51.parser;

import java.io.FileReader;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;

import fr.utbm.vi51.model.Cell;


public class JSONReadFromFile {

	/**
	 * Parse the json.txt and converting the data to gridModel 
	 * 
	 * 
	 * Conversion type Integer -> Cell
	 * 0 : ENTRY
	 * 1 : EMPTY 
	 * 2 :LAND 
	 * 3 :EXIT
	 */
	
	private Integer heigth;
	private Integer width;
	private List<List<Integer>> content;
	private List<List<Cell>> contentForGame;
	
	public JSONReadFromFile() {
		
		JSONParser parser = new JSONParser();
		
		try {
			
			Object obj = parser.parse(new FileReader(
	                "/home/tiboty/Dropbox/VI51/Projet/VI51/VI51_Lemmings_Project_P16/src/main/resources/fr/utbm/vi51/level/"
	                + "lab_parachute.txt"));

	        JSONObject jsonObject = (JSONObject) obj;
			
	        this.heigth = Integer.parseInt((String) jsonObject.get("Heigth"));
	        this.width = Integer.parseInt((String) jsonObject.get("Width"));
	        this.content = new ArrayList<>();
	        JSONArray JSONcontent = (JSONArray) jsonObject.get("Content");
	        
	        Iterator<List<Integer>> iterator = JSONcontent.iterator();
            while (iterator.hasNext()) {
                this.content.add(iterator.next());
            }
            
            convertingContentForGame();
	        
	        System.out.println(heigth);
	        System.out.println(width);
	        System.out.println(content);
	        
	        
		} catch (Exception e) {
			
			e.printStackTrace();
		}
		
	}
	
	
	public void convertingContentForGame(){
		
		this.contentForGame = new ArrayList<>();
		
		for(Integer o : this.content.get(0)){
			
			System.out.println(o + "\n");
		}
		
		
	}
	
	public Integer getHeigth() {
		return heigth;
	}

	public Integer getWidth() {
		return width;
	}



	public List<List<Cell>> getContentForGame() {
		return contentForGame;
	}

	

}
